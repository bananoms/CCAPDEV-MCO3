doctype html
html
  head
    title= title
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css")
    link(rel='stylesheet', href='/stylesheets/style.css')
  body
    nav.navbar.navbar-expand-lg
      .container-fluid
        a.navbar-brand(href="/") LabAccess
        form.d-md-flex.ms-auto(method="GET", action="/search", onsubmit="return handleSearch(this)")
          input.form-control.me-2.search-input(type="search", name="search_term", placeholder="Search", aria-label="Search", required)
        .d-flex
          a.nav-link(href="/") Home
          a.nav-link(href="/about") About

          if session && session.userType === 'Admin'
            a.nav-link(href="/admin") Admin Panel
          if session && session.userType === 'Lab Technician'
            a.nav-link(href="/admin/edit") Manage Reservations
          if session && session.userType === 'Student'
            a.nav-link(href="/user/" + session.userId) My Profile

          if session && session.userId
            a.nav-link(href="/log-out") Log Out
          else
            a.nav-link(href="/log-in") Login
    block content

    script.
      function handleSearch(form) {
        const searchTerm = form.search_term.value.trim();
        if (searchTerm) {
          // Redirect to /search/:search_term format
          window.location.href = `/search/${encodeURIComponent(searchTerm)}`;
        }
        return false; // Prevent normal form submission
      }
