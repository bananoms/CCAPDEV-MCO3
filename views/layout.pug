doctype html
html
  head
    title= title
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css")
    link(rel='stylesheet', href='/stylesheets/style.css')
  body
    nav.navbar.navbar-expand-lg
      .container-fluid
        // Show LabAccess link to /admin for Admin/LabTech, else /
        if user && user.userId && (user.userType === 'Admin' || user.userType === 'Lab Technician')
          a.navbar-brand(href="/admin") LabAccess
        else
          a.navbar-brand(href="/") LabAccess
        form.d-md-flex.ms-auto(method="GET", action="/search", onsubmit="return handleSearch(this)")
          input.form-control.me-2.search-input(type="search", name="search_term", placeholder="Search", aria-label="Search", required)
        .d-flex
          // Home link to /admin for Admin/LabTech, else /
          if user && user.userId && (user.userType === 'Admin' || user.userType === 'Lab Technician')
            a.nav-link(href="/admin") Home
          else
            a.nav-link(href="/") Home
          a.nav-link(href="/about") About

          if user && user.userId
            if (user.userType) === 'Admin'
              span.nav-link Hi, Admin
            else if user.userType === 'Lab Technician'
              span.nav-link Hi, LabTech
            else if user.userType === 'Student'
              span.nav-link Hi, #{user.firstName}
            a.nav-link(href="/log-out") Log Out
          else
            a.nav-link(href="/log-in") Login
    block content

    script.
      function handleSearch(form) {
        const searchTerm = form.search_term.value.trim();
        if (searchTerm) {
          // Redirect to /search/:search_term format
          window.location.href = `/search/${encodeURIComponent(searchTerm)}`;
        }
        return false; // Prevent normal form submission
      }